# AA分账系统

## 📖 项目简介

一个简单易用的AA分账网页应用程序，帮助朋友、同事或团队成员轻松管理和分摊共同费用。系统支持用户注册、账单管理、参与者确认和自动计算最优转账方案。

## 🌐 预览地址

**在线演示**：[http://47.96.83.175:3000/](http://47.96.83.175:3000/)

> 💡 可以直接访问在线版本体验系统功能，无需本地安装

## ✨ 主要功能

### 🔐 用户管理
- **用户注册**：支持新用户注册，设置用户名、显示名称和密码
- **用户登录**：安全的用户登录系统
- **密码管理**：用户可以修改个人密码
- **管理员权限**：内置管理员账号，可进行系统管理操作

### 💰 账单管理
- **添加账单**：创建新的分账账单，包含描述、金额、付款人等信息
- **参与者管理**：添加参与人（只能是已注册用户）
- **付款人设置**：指定账单的付款人
- **图片上传**：支持上传账单图片（最多3张，限制20MB）
- **账单删除**：管理员可删除不需要的账单

### ✅ 确认机制
- **账单确认**：参与人可以对账单进行确认
- **确认状态**：实时显示账单的确认状态
- **批量确认**：支持一键确认所有账单

### 🧮 智能计算
- **自动分账**：根据参与人数自动计算每人应付金额
- **最优转账方案**：自动计算最优的转账方案，减少转账次数
- **统计信息**：显示总金额、平均金额等统计信息

## 🛠️ 技术栈

- **后端**：Node.js + Express.js
- **数据库**：SQLite3
- **前端**：原生HTML + CSS + JavaScript
- **文件上传**：Multer
- **跨域处理**：CORS

## 📋 系统要求

- Node.js 14.0 或更高版本
- npm 或 yarn 包管理器

## 🚀 安装和启动

### 1. 克隆项目
```bash
git clone <repository-url>
cd aa-biling-system
```

### 2. 安装依赖
```bash
npm install
```

### 3. 启动服务器
```bash
# 开发模式启动
npm run dev

# 或者生产模式启动
npm start
```

### 4. 访问应用
打开浏览器访问：`http://localhost:3000`

## 👤 默认管理员账号

系统会自动创建默认管理员账号：
- **用户名**：admin
- **密码**：admin123

⚠️ **安全提醒**：首次使用后请立即修改管理员密码！

## 📱 使用说明

### 用户注册和登录
1. 点击右上角的"登录"按钮
2. 选择"注册新用户"创建账号
3. 使用用户名和密码登录系统

### 添加账单
1. 点击"添加账单"按钮
2. 填写账单描述和总金额
3. 选择付款人
4. 添加参与者（必须是已注册用户）
5. 可选择上传账单图片
6. 点击"添加账单"完成创建

### 管理参与者
1. 在添加账单页面点击"管理参与者"
2. 可以查看所有已注册用户
3. 管理员可以删除不需要的用户

### 确认账单
1. 在账单列表中查看待确认的账单
2. 点击"确认"按钮确认账单
3. 系统会自动计算分账金额

## 📁 项目结构

```
aa-biling-system/
├── server.js          # 服务器主文件
├── database.js        # 数据库操作
├── package.json       # 项目配置
├── public/            # 前端静态文件
│   ├── index.html     # 主页面
│   ├── script.js      # 前端逻辑
│   └── style.css      # 样式文件
├── uploads/           # 上传文件目录
└── README.md          # 项目说明
```

## 🔧 配置说明

### 环境变量
可以通过环境变量配置以下参数：
- `ADMIN_PASSWORD`：管理员密码（默认：admin123）
- `PORT`：服务器端口（默认：3000）

### 数据库
系统使用SQLite数据库，数据文件会自动创建在项目根目录。

## 🐛 常见问题

### Q: 无法启动服务器？
A: 请确保已安装Node.js和npm，并正确安装了项目依赖。

### Q: 上传图片失败？
A: 请检查图片格式（仅支持图片文件）和大小（限制20MB）。

### Q: 无法删除参与者？
A: 如果参与者参与了现有账单，需要先删除相关账单才能删除参与者。

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 许可证

本项目采用 ISC 许可证。

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交Issue
- 发送邮件

---

**版本**：1.0.0  
**最后更新**：2025-06-28
